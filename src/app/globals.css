@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --foreground: #e5e5e5;
  --background: #0a0a0a;
}

body {
  color: var(--foreground);
  background: var(--background);
  font-family: 'Inter', system-ui, sans-serif;
}

/* Ambient drifting bokeh — GPU-accelerated via transform/opacity only */
@keyframes bokeh-drift-1 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  25% { transform: translate(8vw, -6vh) scale(1.1); }
  50% { transform: translate(-4vw, 10vh) scale(0.95); }
  75% { transform: translate(12vw, 4vh) scale(1.05); }
}
@keyframes bokeh-drift-2 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  33% { transform: translate(-10vw, 8vh) scale(1.08); }
  66% { transform: translate(6vw, -12vh) scale(0.92); }
}
@keyframes bokeh-drift-3 {
  0%, 100% { transform: translate(0, 0) scale(1); opacity: 0.6; }
  20% { transform: translate(14vw, 6vh) scale(1.12); opacity: 1; }
  50% { transform: translate(-6vw, -8vh) scale(0.88); opacity: 0.7; }
  80% { transform: translate(4vw, 14vh) scale(1.06); opacity: 0.9; }
}
@keyframes bokeh-drift-4 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  30% { transform: translate(-8vw, -10vh) scale(1.15); }
  60% { transform: translate(10vw, 6vh) scale(0.9); }
  90% { transform: translate(-3vw, -4vh) scale(1.05); }
}
@keyframes bokeh-drift-5 {
  0%, 100% { transform: translate(0, 0) scale(1); opacity: 0.8; }
  40% { transform: translate(6vw, 12vh) scale(1.1); opacity: 0.6; }
  70% { transform: translate(-12vw, -4vh) scale(0.95); opacity: 1; }
}

.bokeh-orb { will-change: transform; contain: layout style paint; }
.bokeh-1 { animation: bokeh-drift-1 45s ease-in-out infinite; }
.bokeh-2 { animation: bokeh-drift-2 55s ease-in-out infinite; }
.bokeh-3 { animation: bokeh-drift-3 60s ease-in-out infinite; }
.bokeh-4 { animation: bokeh-drift-4 50s ease-in-out infinite; }
.bokeh-5 { animation: bokeh-drift-5 65s ease-in-out infinite; }

/* Lens flare — subtle traveling highlight along panel edges */
@keyframes flare-sweep {
  0% { transform: translateX(-100%); opacity: 0; }
  15% { opacity: 1; }
  85% { opacity: 1; }
  100% { transform: translateX(200%); opacity: 0; }
}

@keyframes flare-sweep-slow {
  0% { transform: translateX(-120%); opacity: 0; }
  10% { opacity: 0.8; }
  90% { opacity: 0.8; }
  100% { transform: translateX(220%); opacity: 0; }
}

/* Vertical flare for side edges */
@keyframes flare-sweep-v {
  0% { transform: translateY(-100%); opacity: 0; }
  15% { opacity: 1; }
  85% { opacity: 1; }
  100% { transform: translateY(200%); opacity: 0; }
}

.lens-flare-edge {
  position: relative;
  overflow: hidden;
}

/* Top edge flare */
.lens-flare-edge::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 40%;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(20, 184, 166, 0.3), rgba(167, 139, 250, 0.15), transparent);
  animation: flare-sweep 8s ease-in-out infinite;
  will-change: transform;
  pointer-events: none;
  z-index: 1;
}

/* Left edge flare */
.lens-flare-edge::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 1px;
  height: 30%;
  background: linear-gradient(180deg, transparent, rgba(20, 184, 166, 0.2), transparent);
  animation: flare-sweep-v 12s ease-in-out 3s infinite;
  will-change: transform;
  pointer-events: none;
  z-index: 1;
}

/* Alternate flare timing for variety */
.lens-flare-edge-alt::before {
  animation-delay: 4s;
  animation-duration: 10s;
  background: linear-gradient(90deg, transparent, rgba(245, 158, 11, 0.2), rgba(20, 184, 166, 0.15), transparent);
}

.lens-flare-edge-alt::after {
  animation-delay: 7s;
  animation-duration: 14s;
}

/* Full-width ambient flare streak */
@keyframes ambient-flare {
  0%, 100% { opacity: 0; transform: translateX(-10%) scaleX(0.8); }
  50% { opacity: 1; transform: translateX(10%) scaleX(1); }
}

.ambient-flare {
  animation: ambient-flare 20s ease-in-out infinite;
  will-change: transform, opacity;
}

/* Input field circulating lens flare — travels around all 4 edges */
@keyframes input-flare-top {
  0% { left: -40%; opacity: 0; }
  5% { opacity: 1; }
  25% { left: 100%; opacity: 0; }
  100% { left: 100%; opacity: 0; }
}
@keyframes input-flare-right {
  0%, 25% { top: -30%; opacity: 0; }
  30% { opacity: 1; }
  50% { top: 100%; opacity: 0; }
  100% { top: 100%; opacity: 0; }
}
@keyframes input-flare-bottom {
  0%, 50% { right: -40%; opacity: 0; }
  55% { opacity: 1; }
  75% { right: 100%; opacity: 0; }
  100% { right: 100%; opacity: 0; }
}
@keyframes input-flare-left {
  0%, 75% { bottom: -30%; opacity: 0; }
  80% { opacity: 1; }
  100% { bottom: 100%; opacity: 0; }
}

.input-lens-flare {
  position: relative;
  overflow: hidden;
  border-radius: 0.75rem;
}

/* Top edge — travels left to right */
.input-lens-flare::before {
  content: '';
  position: absolute;
  top: 0;
  left: -40%;
  width: 40%;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(20, 184, 166, 0.4), rgba(167, 139, 250, 0.2), transparent);
  animation: input-flare-top 10s ease-in-out infinite;
  will-change: left, opacity;
  pointer-events: none;
  z-index: 2;
}

/* Right edge — travels top to bottom (uses a child span) */
.input-lens-flare .flare-right {
  position: absolute;
  top: -30%;
  right: 0;
  width: 1px;
  height: 30%;
  background: linear-gradient(180deg, transparent, rgba(20, 184, 166, 0.3), transparent);
  animation: input-flare-right 10s ease-in-out infinite;
  will-change: top, opacity;
  pointer-events: none;
  z-index: 2;
}

/* Bottom edge — travels right to left (uses a child span) */
.input-lens-flare .flare-bottom {
  position: absolute;
  bottom: 0;
  right: -40%;
  width: 40%;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(167, 139, 250, 0.2), rgba(20, 184, 166, 0.35), transparent);
  animation: input-flare-bottom 10s ease-in-out infinite;
  will-change: right, opacity;
  pointer-events: none;
  z-index: 2;
}

/* Left edge — travels bottom to top (uses a child span) */
.input-lens-flare .flare-left {
  position: absolute;
  left: 0;
  bottom: -30%;
  width: 1px;
  height: 30%;
  background: linear-gradient(180deg, transparent, rgba(20, 184, 166, 0.25), transparent);
  animation: input-flare-left 10s ease-in-out infinite;
  will-change: bottom, opacity;
  pointer-events: none;
  z-index: 2;
}

/* Selection styling */
::selection {
  background: rgba(255, 255, 255, 0.15);
  color: #fff;
}

/* Audio player custom styling */
audio::-webkit-media-controls-panel {
  background-color: #1a1a1a;
}

audio::-webkit-media-controls-play-button,
audio::-webkit-media-controls-current-time-display,
audio::-webkit-media-controls-time-remaining-display {
  color: #e5e5e5;
}

/* Smooth scrolling for segment navigation */
html {
  scroll-behavior: smooth;
}

/* Custom scrollbar for dark theme */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: #0a0a0a;
}

::-webkit-scrollbar-thumb {
  background: #2d2d2d;
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: #404040;
}

/* Checkbox override for dark theme */
input[type="checkbox"] {
  accent-color: #e5e5e5;
}

/* Pulse animation for recording */
@keyframes pulse-ring {
  0% {
    box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.5);
  }
  70% {
    box-shadow: 0 0 0 8px rgba(239, 68, 68, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(239, 68, 68, 0);
  }
}

.animate-pulse-ring {
  animation: pulse-ring 1.5s ease-out infinite;
}

/* Page transition — sign-in exit */
@keyframes page-fade-out {
  0% { opacity: 1; transform: scale(1); filter: blur(0); }
  100% { opacity: 0; transform: scale(1.02); filter: blur(6px); }
}

.page-exit {
  animation: page-fade-out 0.5s cubic-bezier(0.4, 0, 1, 1) forwards;
  pointer-events: none;
}

/* Page transition — dashboard entrance */
@keyframes page-fade-in {
  0% { opacity: 0; transform: translateY(8px); }
  100% { opacity: 1; transform: translateY(0); }
}

.page-enter {
  animation: page-fade-in 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

/* Welcome overlay */
@keyframes overlay-fade-in {
  0% { opacity: 0; }
  100% { opacity: 1; }
}

@keyframes modal-enter {
  0% { opacity: 0; transform: scale(0.95) translateY(12px); }
  100% { opacity: 1; transform: scale(1) translateY(0); }
}

@keyframes modal-exit {
  0% { opacity: 1; transform: scale(1) translateY(0); }
  100% { opacity: 0; transform: scale(0.97) translateY(8px); }
}

@keyframes overlay-fade-out {
  0% { opacity: 1; }
  100% { opacity: 0; }
}

.overlay-enter {
  animation: overlay-fade-in 0.3s ease-out forwards;
}

.modal-enter {
  animation: modal-enter 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.overlay-exit {
  animation: overlay-fade-out 0.25s ease-in forwards;
}

.modal-exit {
  animation: modal-exit 0.25s ease-in forwards;
}

/* ── Empty State ── */

/* Mic button pulse in empty state */
@keyframes mic-pulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(167, 139, 250, 0); }
  50% { box-shadow: 0 0 12px 2px rgba(167, 139, 250, 0.12); }
}

.animate-mic-pulse {
  animation: mic-pulse 2.5s ease-in-out infinite;
}

/* Mic button red pulse — plays twice when "Record a voice note" typewriter line is active */
@keyframes mic-pulse-red {
  0%, 100% { box-shadow: 0 0 0 0 rgba(248, 113, 113, 0); }
  50% { box-shadow: 0 0 16px 4px rgba(248, 113, 113, 0.25); }
}

.animate-mic-pulse-red {
  animation: mic-pulse-red 0.6s ease-in-out 2;
}

/* Blinking cursor for typewriter placeholder */
@keyframes blink-cursor {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

.animate-blink-cursor {
  animation: blink-cursor 0.8s step-end infinite;
}

/* Typewriter text fade out */
@keyframes tw-fade-out {
  0% { opacity: 1; }
  100% { opacity: 0; }
}

.animate-tw-fade-out {
  animation: tw-fade-out 0.5s ease-out forwards;
}

/* Accessibility: reduce motion for users who prefer it */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
